"""
共通ユーティリティ関数

このモジュールには、複数のクラスで共通して使用される関数を定義します。
"""

import re
import warnings

# 警告ログを抑制（検索スコアなど不要なログを出さないため）
warnings.filterwarnings("ignore")


def clean_text(text: str) -> str:
    """
    テキストのノイズを除去する関数
    
    PDFから読み込んだテキストには、不要な改行や空白が含まれることがあります。
    この関数は、それらを整理して読みやすい形式にします。
    
    Args:
        text: クリーニング前のテキスト
        
    Returns:
        クリーニング後のテキスト
        
    例：
        入力: "あいうえお\n\n\nかきくけこ"
        出力: "あいうえお\n\nかきくけこ"（連続する3つ以上の改行を2つに統一）
    """
    # 正規表現を使って、3つ以上の連続する改行を2つの改行に置き換える
    # r"\n{3,}" は「改行が3つ以上連続している部分」を意味する
    text = re.sub(r"\n{3,}", "\n\n", text)
    
    # 前後の空白を削除して返す
    return text.strip()
